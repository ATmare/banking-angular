<div class="container col-xl-7 my-4">
  <app-accounts-dropdown-lg [(currAcc)]="account"></app-accounts-dropdown-lg>
</div>

<div class="container col-xl-7">
  <h3 class="row my-3 col-xl-7">Ihre Umsätze</h3>

    <form class="date-block mb-3" [formGroup]="filterForm">
      <div class="date-block__list">
        <mat-form-field class="bg-light">
          <input matInput
                 [matDatepicker]="fromDate"
                 formControlName="fromDate">
          <mat-datepicker-toggle matSuffix [for]="fromDate"></mat-datepicker-toggle>
          <mat-datepicker panelClass="datepickerOne" #fromDate></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="date-block__list">
        <mat-form-field class="bg-light">
          <input matInput
                 [matDatepicker]="toDate"
                 formControlName="toDate">
          <mat-datepicker-toggle matSuffix [for]="toDate"></mat-datepicker-toggle>
          <mat-datepicker #toDate></mat-datepicker>
        </mat-form-field>
      </div>
      <button mat-button color="primary" type="submit" class="primary" (click)="getDateRange(filterForm.value)">Filtern</button>
    </form>

  <mat-form-field appearance="fill" class="bg-light">
    <input class="my-2" matInput (keyup)="applyFilter($event)" placeholder="Suche nach Einträgen" #input>
  </mat-form-field>

  <div class="mat-elevation-z8">
    <table #filteredTable mat-table matSort [dataSource]="dataSource">

      <ng-container matColumnDef="complementaryName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
        <td mat-cell *matCellDef="let element"> {{ element.complementaryName }} </td>
      </ng-container>

      <ng-container matColumnDef="iban">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Iban</th>
        <td mat-cell *matCellDef="let element"> {{ element.iban }} </td>
      </ng-container>

      <ng-container matColumnDef="text">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Verwendungszweck</th>
        <td mat-cell
            *matCellDef="let element"> {{ (element.text.length > 50) ? (element.text | slice:0:50) + '..' : (element.text) }} </td>
      </ng-container>

      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Betrag</th>
        <td mat-cell *matCellDef="let element"> {{ element.amount }} €</td>
      </ng-container>

      <ng-container matColumnDef="timestamp">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Datum</th>
        <td mat-cell *matCellDef="let element"> {{ element.timestamp | date: 'dd.MM.yyyy' }} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[10]"></mat-paginator>
  </div>

</div>
